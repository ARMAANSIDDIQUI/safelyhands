(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8186],{2676:(e,t,a)=>{"use strict";a.d(t,{E1:()=>s,gf:()=>n,q7:()=>i,wz:()=>o});let r="auth_session",s=(e,t)=>{let a={user:{_id:e._id,name:e.name,email:e.email,role:e.role||"user",phone:e.phone,isGoogleUser:e.isGoogleUser,profilePicture:e.profilePicture},token:t,expiresAt:Date.now()+2592e6};localStorage.setItem(r,JSON.stringify(a))},l=()=>{try{let e=localStorage.getItem(r);if(!e)return null;let t=JSON.parse(e);if(t.expiresAt&&Date.now()>t.expiresAt)return i(),null;return t}catch(e){return console.error("Error reading session:",e),null}},n=()=>{let e=l();return(null==e?void 0:e.token)||null},o=()=>{let e=l();return(null==e?void 0:e.user)||null},i=()=>{localStorage.removeItem(r),localStorage.removeItem("user"),localStorage.removeItem("userInfo"),localStorage.removeItem("token")}},4475:(e,t,a)=>{Promise.resolve().then(a.bind(a,20067))},20067:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>g});var r=a(95155),s=a(12115),l=a(71847);let n=(0,l.A)("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);var o=a(23327),i=a(35299),d=a(61362);let c=(0,l.A)("cloud-upload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);var m=a(52056),u=a(18720),f=a(57356),p=a(90758),x=a(2676),h=a(98069);function g(){let[e,t]=(0,s.useState)(!1),[a,l]=(0,s.useState)(!1),[g,b]=(0,s.useState)(!1),[y,j]=(0,s.useState)(!1),v=async()=>{b(!1),t(!0);try{let e=(0,x.gf)(),t=await fetch("".concat("http://localhost:5000/api","/maintenance/seed"),{method:"POST",headers:{Authorization:"Bearer ".concat(e)}}),a=await t.json();t.ok?u.o.success(a.message):u.o.error(a.message||"Seeding failed")}catch(e){u.o.error("Network error during seeding")}finally{t(!1)}},N=async()=>{j(!1),l(!0);try{let e=(0,x.gf)(),t=await fetch("".concat("http://localhost:5000/api","/maintenance/migrate"),{method:"POST",headers:{Authorization:"Bearer ".concat(e)}}),a=await t.json();t.ok?u.o.success("Migration completed successfully!"):u.o.error(a.message||"Migration failed")}catch(e){u.o.error("Network error during migration")}finally{l(!1)}};return(0,r.jsxs)("div",{className:"space-y-8 max-w-4xl",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-display font-bold text-slate-900",children:"System Maintenance"}),(0,r.jsx)("p",{className:"text-slate-500 mt-2",children:"Manage database state and production deployments."})]}),(0,r.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,r.jsxs)(p.Zp,{className:"border-blue-100 bg-blue-50/20",children:[(0,r.jsxs)(p.aR,{children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-xl bg-blue-100 flex items-center justify-center text-blue-600 mb-4",children:(0,r.jsx)(n,{size:24})}),(0,r.jsx)(p.ZB,{children:"Seed Defaults"}),(0,r.jsx)(p.BT,{children:"Reset services, team members, and investors to original templates."})]}),(0,r.jsxs)(p.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"bg-white/60 p-4 rounded-lg border border-blue-100 text-sm text-slate-600 flex gap-3",children:[(0,r.jsx)(o.A,{size:18,className:"text-blue-500 shrink-0"}),(0,r.jsx)("p",{children:"Useful for first-time setups or if you want to restore the official broomees.com service list."})]}),(0,r.jsxs)(f.$,{onClick:()=>b(!0),disabled:e||a,className:"w-full bg-blue-600 hover:bg-blue-700",children:[e?(0,r.jsx)(i.A,{className:"mr-2 animate-spin"}):(0,r.jsx)(d.A,{className:"mr-2",size:18}),"Trigger Seeding"]})]})]}),(0,r.jsxs)(p.Zp,{className:"border-amber-100 bg-amber-50/20",children:[(0,r.jsxs)(p.aR,{children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-xl bg-amber-100 flex items-center justify-center text-amber-600 mb-4",children:(0,r.jsx)(c,{size:24})}),(0,r.jsx)(p.ZB,{children:"Sync to Atlas"}),(0,r.jsx)(p.BT,{children:"Move your local database records to MongoDB Atlas production cloud."})]}),(0,r.jsxs)(p.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"bg-amber-100/50 p-4 rounded-lg border border-amber-200 text-sm text-amber-900 flex gap-3",children:[(0,r.jsx)(m.A,{size:18,className:"text-amber-600 shrink-0"}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Warning:"})," This wipes the cloud database before uploading. Use with caution!"]})]}),(0,r.jsxs)(f.$,{onClick:()=>j(!0),disabled:e||a,variant:"outline",className:"w-full border-amber-200 text-amber-700 hover:bg-amber-100",children:[a?(0,r.jsx)(i.A,{className:"mr-2 animate-spin"}):(0,r.jsx)(c,{className:"mr-2",size:18}),"Migrate Data to Cloud"]})]})]})]}),(0,r.jsx)(h.A,{open:g,onOpenChange:b,onConfirm:v,title:"Trigger Seeding?",description:"This will wipe existing services/team data and reload from defaults! This action cannot be undone.",confirmText:"Seed Database",loading:e}),(0,r.jsx)(h.A,{open:y,onOpenChange:j,onConfirm:N,title:"Migrate to Atlas?",description:"DANGER: This will wipe your MongoDB Atlas data and replace it with local data. Use with extreme caution!",confirmText:"Migrate Now",loading:a})]})}},23327:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(71847).A)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},52056:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(71847).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},57356:(e,t,a)=>{"use strict";a.d(t,{$:()=>d});var r=a(95155),s=a(12115),l=a(32467),n=a(83101),o=a(64269);let i=(0,n.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:a,variant:s,size:n,asChild:d=!1,...c}=e,m=d?l.DX:"button";return(0,r.jsx)(m,{className:(0,o.cn)(i({variant:s,size:n,className:a})),ref:t,...c})});d.displayName="Button"},61362:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(71847).A)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},64269:(e,t,a)=>{"use strict";a.d(t,{Y:()=>n,cn:()=>l});var r=a(2821),s=a(75889);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}function n(e){return e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"}},90758:(e,t,a)=>{"use strict";a.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>i,Zp:()=>n,aR:()=>o,wL:()=>m});var r=a(95155),s=a(12115),l=a(64269);let n=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("rounded-xl border bg-card text-card-foreground shadow",a),...s})});n.displayName="Card";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",a),...s})});o.displayName="CardHeader";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("h3",{ref:t,className:(0,l.cn)("font-semibold leading-none tracking-tight",a),...s})});i.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("p",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",a),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",a),...s})});c.displayName="CardContent";let m=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",a),...s})});m.displayName="CardFooter"},94128:(e,t,a)=>{"use strict";a.d(t,{Cf:()=>m,Es:()=>f,L3:()=>p,c7:()=>u,lG:()=>i,rr:()=>x});var r=a(95155),s=a(12115),l=a(93409),n=a(65229),o=a(64269);let i=l.bL;l.l9;let d=l.ZL;l.bm;let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.hJ,{ref:t,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s})});c.displayName=l.hJ.displayName;let m=s.forwardRef((e,t)=>{let{className:a,children:s,...i}=e;return(0,r.jsxs)(d,{children:[(0,r.jsx)(c,{}),(0,r.jsxs)(l.UC,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...i,children:[s,(0,r.jsxs)(l.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(n.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=l.UC.displayName;let u=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};u.displayName="DialogHeader";let f=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};f.displayName="DialogFooter";let p=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.hE,{ref:t,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",a),...s})});p.displayName=l.hE.displayName;let x=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.VY,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",a),...s})});x.displayName=l.VY.displayName},98069:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var r=a(95155);a(12115);var s=a(94128),l=a(57356),n=a(52056);function o(e){let{open:t,onOpenChange:a,onConfirm:o,title:i="Are you sure?",description:d="This action cannot be undone.",confirmText:c="Confirm",cancelText:m="Cancel",variant:u="destructive",loading:f=!1}=e;return(0,r.jsx)(s.lG,{open:t,onOpenChange:a,children:(0,r.jsxs)(s.Cf,{className:"sm:max-w-[425px]",children:[(0,r.jsxs)(s.c7,{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:["destructive"===u&&(0,r.jsx)(n.A,{className:"h-5 w-5 text-red-500"}),(0,r.jsx)(s.L3,{children:i})]}),(0,r.jsx)(s.rr,{className:"pt-2",children:d})]}),(0,r.jsxs)(s.Es,{className:"mt-4",children:[(0,r.jsx)(l.$,{variant:"outline",onClick:()=>a(!1),disabled:f,children:m}),(0,r.jsx)(l.$,{variant:u,onClick:o,disabled:f,children:f?"Processing...":c})]})]})})}}},e=>{e.O(0,[4230,4909,5391,1903,5207,8441,1255,7358],()=>e(e.s=4475)),_N_E=e.O()}]);