(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7581],{2676:(e,t,s)=>{"use strict";s.d(t,{E1:()=>r,gf:()=>n,q7:()=>o,wz:()=>i});let a="auth_session",r=(e,t)=>{let s={user:{_id:e._id,name:e.name,email:e.email,role:e.role||"user",phone:e.phone,isGoogleUser:e.isGoogleUser,profilePicture:e.profilePicture},token:t,expiresAt:Date.now()+2592e6};localStorage.setItem(a,JSON.stringify(s))},l=()=>{try{let e=localStorage.getItem(a);if(!e)return null;let t=JSON.parse(e);if(t.expiresAt&&Date.now()>t.expiresAt)return o(),null;return t}catch(e){return console.error("Error reading session:",e),null}},n=()=>{let e=l();return(null==e?void 0:e.token)||null},i=()=>{let e=l();return(null==e?void 0:e.user)||null},o=()=>{localStorage.removeItem(a),localStorage.removeItem("user"),localStorage.removeItem("userInfo"),localStorage.removeItem("token")}},9540:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]])},13119:(e,t,s)=>{"use strict";s.d(t,{A:()=>c,O:()=>o});var a=s(95155),r=s(12115),l=s(20063),n=s(2676);let i=(0,r.createContext)({user:null,setUser:()=>{},loading:!0,login:async()=>{},register:async()=>{},verifyEmail:async()=>{},logout:()=>{}}),o=e=>{let{children:t}=e,[s,o]=(0,r.useState)(null),[c,d]=(0,r.useState)(!0),h=(0,l.useRouter)();(0,r.useEffect)(()=>{let e=(0,n.wz)(),t=(0,n.gf)();e&&t?(console.log("AuthContext: Restoring session. Token present:",!!t),o({...e,token:t})):console.log("AuthContext: No session found in localStorage"),d(!1)},[]);let u=async(e,t)=>{try{let s=await fetch("".concat("http://localhost:5000/api","/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}),a=await s.json();if(!s.ok)throw Error(a.message||"Login failed");return(0,n.E1)(a,a.token),console.log("AuthContext: Login successful. Token:",a.token?"Yes":"No"),o(a),"worker"===a.role?h.push("/worker/dashboard"):"admin"===a.role?h.push("/admin"):h.push("/dashboard"),{success:!0}}catch(e){return{success:!1,message:e.message}}},m=async(e,t,s,a)=>{try{let r=await fetch("".concat("http://localhost:5000/api","/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,email:t,phone:s,password:a})}),l=await r.json();if(!r.ok)throw Error(l.message||"Signup failed");return{success:!0,message:l.message,email:l.email}}catch(e){return{success:!1,message:e.message}}},x=async(e,t)=>{try{let s=await fetch("".concat("http://localhost:5000/api","/auth/verify-email"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,otp:t})}),a=await s.json();if(!s.ok)throw Error(a.message||"Verification failed");return(0,n.E1)(a,a.token),console.log("AuthContext: Email verified. Token:",a.token?"Yes":"No"),o(a),h.push("/dashboard"),{success:!0}}catch(e){return{success:!1,message:e.message}}};return(0,a.jsx)(i.Provider,{value:{user:s,setUser:o,loading:c,login:u,register:m,verifyEmail:x,logout:()=>{(0,n.q7)(),o(null),h.push("/login")}},children:t})},c=()=>(0,r.useContext)(i)},19485:(e,t,s)=>{Promise.resolve().then(s.bind(s,84352))},20063:(e,t,s)=>{"use strict";var a=s(47260);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},21873:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},29633:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]])},37586:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]])},38104:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("calendar-check",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]])},59384:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]])},65229:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},65993:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]])},71847:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var a=s(12115);let r=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,a.forwardRef)((e,t)=>{let{color:s="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:c="",children:d,iconNode:h,...u}=e;return(0,a.createElement)("svg",{ref:t,...n,width:r,height:r,stroke:s,strokeWidth:o?24*Number(i)/Number(r):i,className:l("lucide",c),...!d&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(u)&&{"aria-hidden":"true"},...u},[...h.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(d)?d:[d]])}),o=(e,t)=>{let s=(0,a.forwardRef)((s,n)=>{let{className:o,...c}=s;return(0,a.createElement)(i,{ref:n,iconNode:t,className:l("lucide-".concat(r(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),o),...c})});return s.displayName=r(e),s}},76907:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},84352:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>A});var a=s(95155),r=s(13119),l=s(20063),n=s(12115),i=s(52619),o=s.n(i),c=s(59384),d=s(38104),h=s(29633),u=s(21873),m=s(91169),x=s(76907),f=s(71847);let p=(0,f.A)("message-square-quote",[["path",{d:"M14 14a2 2 0 0 0 2-2V8h-2",key:"1r06pg"}],["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}],["path",{d:"M8 14a2 2 0 0 0 2-2V8H8",key:"1jzu5j"}]]);var g=s(37586);let y=(0,f.A)("wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]]);var b=s(65229),k=s(65993),v=s(84926),j=s(9540);function A(e){var t;let{children:s}=e,{user:i,loading:f,logout:A}=(0,r.A)(),w=(0,l.useRouter)(),N=(0,l.usePathname)(),[S,C]=(0,n.useState)(!1);if((0,n.useEffect)(()=>{f||(i?"admin"!==i.role&&w.push("/dashboard"):w.push("/login"))},[i,f,w]),(0,n.useEffect)(()=>{C(!1)},[N]),f||!i||"admin"!==i.role)return null;let M=[{href:"/admin",icon:c.A,label:"Overview"},{href:"/admin/bookings",icon:d.A,label:"Bookings & Attendance"},{href:"/admin/services",icon:h.A,label:"Services"},{href:"/admin/subcategories",icon:h.A,label:"Subcategories"},{href:"/admin/cities",icon:u.A,label:"Cities"},{href:"/admin/workers",icon:m.A,label:"Workers"},{href:"/admin/users",icon:m.A,label:"Users"},{href:"/admin/team",icon:x.A,label:"Team Management"},{href:"/admin/testimonials",icon:p,label:"Testimonials"},{href:"/admin/reviews",icon:g.A,label:"Review Moderation"},{href:"/admin/maintenance",icon:y,label:"Maintenance"},{href:"/admin/carousel",icon:c.A,label:"Carousel"},{href:"/admin/inquiries",icon:h.A,label:"Inquiries"}];return(0,a.jsxs)("div",{className:"min-h-screen bg-slate-50 flex",children:[S&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:()=>C(!1)}),(0,a.jsxs)("aside",{className:"fixed inset-y-0 left-0 z-50 w-72 bg-white transform transition-transform duration-300 ease-in-out md:hidden ".concat(S?"translate-x-0":"-translate-x-full"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-slate-100",children:[(0,a.jsxs)(o(),{href:"/admin",className:"text-xl font-bold font-display text-slate-900 flex items-center gap-2",children:["Safely Hands ",(0,a.jsx)("span",{className:"text-blue-500",children:"Admin"})]}),(0,a.jsx)("button",{onClick:()=>C(!1),className:"p-2 hover:bg-slate-100 rounded-lg",children:(0,a.jsx)(b.A,{size:20})})]}),(0,a.jsx)("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto max-h-[calc(100vh-180px)]",children:M.map(e=>{let t=e.icon,s=N===e.href;return(0,a.jsxs)(o(),{href:e.href,className:"flex items-center gap-3 px-4 py-3 rounded-xl transition-all ".concat(s?"bg-blue-50 text-blue-600":"text-slate-600 hover:text-slate-900 hover:bg-slate-100"),children:[(0,a.jsx)(t,{size:20}),(0,a.jsx)("span",{className:"font-medium",children:e.label})]},e.href)})}),(0,a.jsxs)("div",{className:"p-4 border-t border-slate-200",children:[(0,a.jsxs)(o(),{href:"/",className:"flex items-center gap-3 w-full px-4 py-3 text-slate-600 hover:text-slate-900 hover:bg-slate-100 rounded-xl transition-colors mb-2",children:[(0,a.jsx)(k.A,{size:20}),(0,a.jsx)("span",{className:"font-medium",children:"Back to Site"})]}),(0,a.jsxs)("button",{onClick:()=>{A(),w.push("/")},className:"flex items-center gap-3 w-full px-4 py-3 text-red-600 hover:text-red-700 hover:bg-red-50 rounded-xl transition-colors",children:[(0,a.jsx)(v.A,{size:20}),(0,a.jsx)("span",{className:"font-medium",children:"Sign Out"})]})]})]}),(0,a.jsxs)("aside",{className:"w-64 bg-white border-r border-slate-200 hidden md:block shrink-0 h-screen sticky top-0 overflow-y-auto",children:[(0,a.jsx)("div",{className:"p-6 border-b border-slate-100",children:(0,a.jsxs)(o(),{href:"/admin",className:"text-xl font-bold font-display text-slate-900 flex items-center gap-2",children:["Safely Hands ",(0,a.jsx)("span",{className:"text-blue-500",children:"Admin"})]})}),(0,a.jsx)("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto",children:M.map(e=>{let t=e.icon,s=N===e.href;return(0,a.jsxs)(o(),{href:e.href,className:"flex items-center gap-3 px-4 py-3 rounded-xl transition-all ".concat(s?"bg-blue-50 text-blue-600":"text-slate-600 hover:text-slate-900 hover:bg-slate-100"),children:[(0,a.jsx)(t,{size:20}),(0,a.jsx)("span",{className:"font-medium",children:e.label})]},e.href)})}),(0,a.jsxs)("div",{className:"p-4 border-t border-slate-200",children:[(0,a.jsxs)(o(),{href:"/",className:"flex items-center gap-3 w-full px-4 py-3 text-slate-600 hover:text-slate-900 hover:bg-slate-100 rounded-xl transition-colors mb-2",children:[(0,a.jsx)(k.A,{size:20}),(0,a.jsx)("span",{className:"font-medium",children:"Back to Site"})]}),(0,a.jsxs)("button",{onClick:()=>{A(),w.push("/")},className:"flex items-center gap-3 w-full px-4 py-3 text-red-600 hover:text-red-700 hover:bg-red-50 rounded-xl transition-colors",children:[(0,a.jsx)(v.A,{size:20}),(0,a.jsx)("span",{className:"font-medium",children:"Sign Out"})]})]})]}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col h-full overflow-hidden",children:[(0,a.jsxs)("header",{className:"h-16 bg-white border-b border-slate-200 flex items-center justify-between px-4 md:px-8 z-10",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("button",{onClick:()=>C(!0),className:"p-2 hover:bg-slate-100 rounded-lg md:hidden",children:(0,a.jsx)(j.A,{size:24})}),(0,a.jsx)("h2",{className:"text-lg font-semibold text-slate-800",children:"Admin Dashboard"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 md:gap-4",children:[i.profilePicture?(0,a.jsx)("img",{src:i.profilePicture,alt:i.name,className:"w-8 h-8 rounded-full object-cover border border-slate-200"}):(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-bold",children:null==i||null==(t=i.name)?void 0:t.charAt(0).toUpperCase()}),(0,a.jsx)("span",{className:"text-sm font-medium text-slate-600 hidden sm:block",children:null==i?void 0:i.name})]})]}),(0,a.jsx)("main",{className:"flex-1 overflow-y-auto p-4 md:p-8",children:s})]})]})}},84926:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]])},91169:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])}},e=>{e.O(0,[2619,8441,1255,7358],()=>e(e.s=19485)),_N_E=e.O()}]);