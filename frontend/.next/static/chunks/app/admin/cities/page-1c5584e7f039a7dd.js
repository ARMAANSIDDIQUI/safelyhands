(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7988],{2676:(e,t,s)=>{"use strict";s.d(t,{E1:()=>a,gf:()=>i,q7:()=>n,wz:()=>c});let l="auth_session",a=(e,t)=>{let s={user:{_id:e._id,name:e.name,email:e.email,role:e.role||"user",phone:e.phone,isGoogleUser:e.isGoogleUser,profilePicture:e.profilePicture},token:t,expiresAt:Date.now()+2592e6};localStorage.setItem(l,JSON.stringify(s))},r=()=>{try{let e=localStorage.getItem(l);if(!e)return null;let t=JSON.parse(e);if(t.expiresAt&&Date.now()>t.expiresAt)return n(),null;return t}catch(e){return console.error("Error reading session:",e),null}},i=()=>{let e=r();return(null==e?void 0:e.token)||null},c=()=>{let e=r();return(null==e?void 0:e.user)||null},n=()=>{localStorage.removeItem(l),localStorage.removeItem("user"),localStorage.removeItem("userInfo"),localStorage.removeItem("token")}},5917:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});let l=(0,s(71847).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},6191:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});let l=(0,s(71847).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},6505:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var l=s(95155),a=s(12115),r=s(6191),i=s(21873),c=s(11010),n=s(71360),o=s(65229),d=s(5917),h=s(18720),x=s(2676);function u(){let[e,t]=(0,a.useState)([]),[s,u]=(0,a.useState)(!0),[m,p]=(0,a.useState)(!1),[b,f]=(0,a.useState)(null),[g,y]=(0,a.useState)({name:"",slug:"",icon:"",isActive:!0});(0,a.useEffect)(()=>{v()},[]);let v=async()=>{try{let e=await fetch("".concat("http://localhost:5000/api","/cities"));if(e.ok){let s=await e.json();t(s)}}catch(e){h.o.error("Failed to load cities")}finally{u(!1)}},j=async e=>{e.preventDefault();let t=b?"".concat("http://localhost:5000/api","/cities/").concat(b._id):"".concat("http://localhost:5000/api","/cities"),s=b?"PUT":"POST";try{let e=await fetch(t,{method:s,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat((0,x.gf)())},body:JSON.stringify(g)});if(e.ok)h.o.success(b?"City updated":"City created"),v(),A();else{let t=await e.json();h.o.error(t.message||"Operation failed")}}catch(e){h.o.error("Error saving city")}},N=async e=>{if(confirm("Are you sure you want to delete this city?"))try{(await fetch("".concat("http://localhost:5000/api","/cities/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat((0,x.gf)())}})).ok?(h.o.success("City deleted"),v()):h.o.error("Failed to delete")}catch(e){h.o.error("Error deleting city")}},k=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?(f(e),y({name:e.name,slug:e.slug,icon:e.icon||"",isActive:e.isActive})):(f(null),y({name:"",slug:"",icon:"",isActive:!0})),p(!0)},A=()=>{p(!1),f(null)};return(0,l.jsxs)("div",{className:"p-8 max-w-7xl mx-auto",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-slate-800",children:"City Management"}),(0,l.jsx)("p",{className:"text-slate-500",children:"Manage available cities for services"})]}),(0,l.jsxs)("button",{onClick:()=>k(),className:"bg-blue-500 text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-blue-600 transition-colors",children:[(0,l.jsx)(r.A,{size:20}),"Add New City"]})]}),(0,l.jsx)("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"w-full text-left",children:[(0,l.jsx)("thead",{className:"bg-slate-50 text-slate-500 font-bold text-sm uppercase tracking-wider",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"px-6 py-4",children:"Name"}),(0,l.jsx)("th",{className:"px-6 py-4",children:"Slug"}),(0,l.jsx)("th",{className:"px-6 py-4",children:"Status"}),(0,l.jsx)("th",{className:"px-6 py-4 text-right",children:"Actions"})]})}),(0,l.jsx)("tbody",{className:"divide-y divide-slate-100",children:s?(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:"4",className:"text-center py-8 text-slate-500",children:"Loading..."})}):0===e.length?(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:"4",className:"text-center py-8 text-slate-500",children:"No cities found. Add one to get started."})}):e.map(e=>(0,l.jsxs)("tr",{className:"hover:bg-slate-50 transition-colors",children:[(0,l.jsxs)("td",{className:"px-6 py-4 font-bold text-slate-800 flex items-center gap-3",children:[(0,l.jsx)("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center text-blue-500",children:(0,l.jsx)(i.A,{size:16})}),e.name]}),(0,l.jsx)("td",{className:"px-6 py-4 text-slate-500 font-mono text-sm",children:e.slug}),(0,l.jsx)("td",{className:"px-6 py-4",children:(0,l.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider ".concat(e.isActive?"bg-green-100 text-green-600":"bg-slate-100 text-slate-500"),children:e.isActive?"Active":"Inactive"})}),(0,l.jsx)("td",{className:"px-6 py-4 text-right",children:(0,l.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,l.jsx)("button",{onClick:()=>k(e),className:"p-2 hover:bg-blue-50 text-slate-400 hover:text-blue-500 rounded-lg transition-colors",children:(0,l.jsx)(c.A,{size:18})}),(0,l.jsx)("button",{onClick:()=>N(e._id),className:"p-2 hover:bg-red-50 text-slate-400 hover:text-red-500 rounded-lg transition-colors",children:(0,l.jsx)(n.A,{size:18})})]})})]},e._id))})]})})}),m&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:(0,l.jsxs)("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl animate-in fade-in zoom-in duration-200",children:[(0,l.jsxs)("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center",children:[(0,l.jsx)("h2",{className:"text-xl font-bold text-slate-800",children:b?"Edit City":"Add New City"}),(0,l.jsx)("button",{onClick:A,className:"text-slate-400 hover:text-slate-600",children:(0,l.jsx)(o.A,{size:24})})]}),(0,l.jsxs)("form",{onSubmit:j,className:"p-6 space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"City Name"}),(0,l.jsx)("input",{type:"text",required:!0,className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 focus:outline-none focus:border-blue-500",value:g.name,onChange:e=>y({...g,name:e.target.value}),placeholder:"e.g. New Delhi"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Slug"}),(0,l.jsx)("input",{type:"text",className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 focus:outline-none focus:border-blue-500 font-mono text-sm",value:g.slug,onChange:e=>y({...g,slug:e.target.value}),placeholder:"e.g. new-delhi (auto-generated if empty)"})]}),(0,l.jsx)("div",{className:"flex items-center gap-3 pt-2",children:(0,l.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer select-none",children:[(0,l.jsx)("div",{className:"w-6 h-6 rounded border flex items-center justify-center transition-colors ".concat(g.isActive?"bg-blue-500 border-blue-500 text-white":"bg-white border-slate-300"),children:g.isActive&&(0,l.jsx)(d.A,{size:14,strokeWidth:3})}),(0,l.jsx)("input",{type:"checkbox",className:"hidden",checked:g.isActive,onChange:e=>y({...g,isActive:e.target.checked})}),(0,l.jsx)("span",{className:"font-bold text-slate-700",children:"Active"})]})}),(0,l.jsx)("div",{className:"pt-4",children:(0,l.jsx)("button",{type:"submit",className:"w-full bg-blue-500 text-white py-3 rounded-xl font-bold hover:bg-blue-600 transition-colors",children:b?"Update City":"Create City"})})]})]})})]})}},11010:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});let l=(0,s(71847).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},21873:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});let l=(0,s(71847).A)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},60945:(e,t,s)=>{Promise.resolve().then(s.bind(s,6505))},65229:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});let l=(0,s(71847).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},71360:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});let l=(0,s(71847).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])}},e=>{e.O(0,[4230,8441,1255,7358],()=>e(e.s=60945)),_N_E=e.O()}]);