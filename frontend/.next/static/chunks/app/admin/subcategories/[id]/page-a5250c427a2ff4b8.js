(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5279],{6191:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});let l=(0,t(71847).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},20063:(e,s,t)=>{"use strict";var l=t(47260);t.o(l,"useParams")&&t.d(s,{useParams:function(){return l.useParams}}),t.o(l,"usePathname")&&t.d(s,{usePathname:function(){return l.usePathname}}),t.o(l,"useRouter")&&t.d(s,{useRouter:function(){return l.useRouter}}),t.o(l,"useSearchParams")&&t.d(s,{useSearchParams:function(){return l.useSearchParams}})},23326:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>b});var l=t(95155),a=t(12115),o=t(20063),r=t(35626),i=t(71360),n=t(46046),d=t(6191),c=t(18720),u=t(9880),x=t(2676);function b(e){var s,t,b,p;let{params:h}=e,m=(0,o.useRouter)(),{id:f}=(0,a.use)(h),[v,g]=(0,a.useState)(!0),[j,y]=(0,a.useState)(!1),[N,w]=(0,a.useState)({name:"",price:0,description:"",image:"",features:[],inclusions:"",service:null});(0,a.useEffect)(()=>{k()},[f]);let k=async()=>{try{let s=await fetch("".concat("http://localhost:5000/api","/subcategories/").concat(f));if(s.ok){var e;let t=await s.json();w({...t,service:(null==(e=t.service)?void 0:e._id)||t.service,features:t.features||[],questions:t.questions||[]})}else c.o.error("Failed to load subcategory"),m.push("/admin/subcategories")}catch(e){c.o.error("Error loading subcategory"),console.error(e)}finally{g(!1)}},q=async()=>{y(!0);try{(await fetch("".concat("http://localhost:5000/api","/subcategories/").concat(f),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat((0,x.gf)())},body:JSON.stringify(N)})).ok?(c.o.success("Subcategory updated successfully"),m.push("/admin/subcategories")):c.o.error("Failed to update subcategory")}catch(e){c.o.error("Error updating subcategory")}finally{y(!1)}},C=async()=>{if(confirm("Are you sure you want to delete this subcategory? This action cannot be undone."))try{(await fetch("".concat("http://localhost:5000/api","/subcategories/").concat(f),{method:"DELETE",headers:{Authorization:"Bearer ".concat((0,x.gf)())}})).ok?(c.o.success("Subcategory deleted"),m.push("/admin/subcategories")):c.o.error("Failed to delete subcategory")}catch(e){c.o.error("Error deleting subcategory")}};return v?(0,l.jsx)("div",{className:"p-8 text-center text-slate-500",children:"Loading..."}):(0,l.jsxs)("div",{className:"p-8 max-w-4xl mx-auto pb-32",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)("button",{onClick:()=>m.back(),className:"p-2 hover:bg-slate-100 rounded-full transition-colors",children:(0,l.jsx)(r.A,{size:24,className:"text-slate-600"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-slate-800",children:"Edit Subcategory"}),(0,l.jsxs)("p",{className:"text-slate-500",children:["Editing ",N.name,N.service&&" (".concat(N.service.title,")")]})]})]}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsxs)("button",{onClick:C,className:"bg-red-50 text-red-600 px-6 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-red-100 transition-colors",children:[(0,l.jsx)(i.A,{size:20}),"Delete"]}),(0,l.jsxs)("button",{onClick:q,disabled:j,className:"bg-blue-500 text-white px-8 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-blue-600 transition-colors disabled:opacity-50",children:[(0,l.jsx)(n.A,{size:20}),j?"Saving...":"Save Changes"]})]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-8 mb-8",children:[(0,l.jsx)("h2",{className:"text-xl font-bold text-slate-800 mb-6",children:"Basic Details"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{className:"md:col-span-2",children:[(0,l.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Subcategory Name"}),(0,l.jsx)("input",{type:"text",className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 focus:outline-none focus:border-blue-500",value:N.name,onChange:e=>w({...N,name:e.target.value})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Price (₹)"}),(0,l.jsx)("input",{type:"number",className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 focus:outline-none focus:border-blue-500",value:N.price,onChange:e=>w({...N,price:parseFloat(e.target.value)||0})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Status"}),(0,l.jsxs)("div",{className:"flex items-center gap-3 bg-slate-50 border border-slate-200 rounded-xl px-4 py-3",children:[(0,l.jsx)("input",{type:"checkbox",id:"isActive",checked:!1!==N.isActive,onChange:e=>w({...N,isActive:e.target.checked}),className:"w-5 h-5 rounded text-blue-500 focus:ring-blue-500"}),(0,l.jsx)("label",{htmlFor:"isActive",className:"text-sm font-medium text-slate-700 cursor-pointer",children:"Active (visible to users)"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Parent Service"}),(0,l.jsx)("input",{type:"text",disabled:!0,className:"w-full bg-slate-100 border border-slate-200 rounded-xl px-4 py-3 text-slate-500 cursor-not-allowed",value:(null==(s=N.service)?void 0:s.title)||"No parent service"})]}),(0,l.jsxs)("div",{className:"md:col-span-2",children:[(0,l.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Description"}),(0,l.jsx)("textarea",{className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 focus:outline-none focus:border-blue-500 h-24 resize-none",value:N.description,onChange:e=>w({...N,description:e.target.value})})]}),(0,l.jsxs)("div",{className:"md:col-span-2",children:[(0,l.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Features (comma separated)"}),(0,l.jsx)("input",{type:"text",className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 focus:outline-none focus:border-blue-500",value:(null==(t=N.features)?void 0:t.join(", "))||"",onChange:e=>w({...N,features:e.target.value.split(",").map(e=>e.trim()).filter(e=>e)}),placeholder:"Feature 1, Feature 2, Feature 3"})]}),(0,l.jsxs)("div",{className:"md:col-span-2",children:[(0,l.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"What's Included (detailed text)"}),(0,l.jsx)("textarea",{className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 focus:outline-none focus:border-blue-500 h-32 resize-none",value:N.inclusions||"",onChange:e=>w({...N,inclusions:e.target.value}),placeholder:"Detailed description of what's included in this subcategory..."})]})]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-8 mb-8",children:[(0,l.jsx)("h2",{className:"text-xl font-bold text-slate-800 mb-6",children:"Media"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Subcategory Image"}),(0,l.jsx)("div",{className:"bg-slate-50 border border-slate-200 border-dashed rounded-2xl p-6",children:(0,l.jsx)(u.A,{value:N.image,onChange:e=>w({...N,image:e})})}),(0,l.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:"This image will be shown in the booking wizard. Falls back to service image if not provided."})]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-8 mb-8",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-xl font-bold text-slate-800",children:"Dynamic Questions"}),(0,l.jsx)("p",{className:"text-slate-500 text-sm",children:"Define custom questions for this subcategory"})]}),(0,l.jsxs)("button",{onClick:()=>w(e=>({...e,questions:[...e.questions||[],{stepTitle:"New Step",fields:[]}]})),className:"text-blue-500 font-bold text-sm flex items-center gap-1 hover:bg-blue-50 px-3 py-1.5 rounded-lg transition-colors",children:[(0,l.jsx)(d.A,{size:16})," Add Step"]})]}),(0,l.jsxs)("div",{className:"space-y-8",children:[(null==(b=N.questions)?void 0:b.length)===0&&(0,l.jsx)("p",{className:"text-slate-400 italic text-center py-8",children:"No dynamic questions yet. Add a step to get started."}),null==(p=N.questions)?void 0:p.map((e,s)=>{var t;return(0,l.jsxs)("div",{className:"border-2 border-slate-100 rounded-xl p-6 relative bg-slate-50/50",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,l.jsxs)("span",{className:"bg-slate-200 text-slate-600 font-bold px-3 py-1 rounded text-xs",children:["Step ",s+1]}),(0,l.jsx)("input",{type:"text",className:"flex-1 bg-transparent border-b border-transparent hover:border-slate-300 focus:border-blue-500 focus:outline-none font-bold text-slate-800 text-lg px-2 py-1 transition-colors",value:e.stepTitle,placeholder:"Step Title (e.g. Work Details)",onChange:e=>{let t=[...N.questions];t[s].stepTitle=e.target.value,w({...N,questions:t})}}),(0,l.jsx)("button",{onClick:()=>{if(!confirm("Remove this step?"))return;let e=[...N.questions];e.splice(s,1),w({...N,questions:e})},className:"text-slate-400 hover:text-red-500 p-2 transition-colors",children:(0,l.jsx)(i.A,{size:18})})]}),(0,l.jsxs)("div",{className:"space-y-4 pl-4 border-l-2 border-slate-200",children:[null==(t=e.fields)?void 0:t.map((e,t)=>{var a,o,r;return(0,l.jsxs)("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[(0,l.jsxs)("div",{className:"flex items-start justify-between gap-4 mb-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 flex-1",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-1",children:"Label"}),(0,l.jsx)("input",{type:"text",className:"w-full bg-slate-50 border border-slate-100 rounded px-2 py-1.5 text-sm focus:border-blue-500 focus:outline-none",value:e.label,onChange:e=>{let l=[...N.questions];l[s].fields[t].label=e.target.value,w({...N,questions:l})}})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-1",children:"JSON Key"}),(0,l.jsx)("input",{type:"text",className:"w-full bg-slate-50 border border-slate-100 rounded px-2 py-1.5 text-sm focus:border-blue-500 focus:outline-none font-mono",value:e.name,onChange:e=>{let l=[...N.questions];l[s].fields[t].name=e.target.value,w({...N,questions:l})}})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-1",children:"Type"}),(0,l.jsxs)("select",{className:"w-full bg-slate-50 border border-slate-100 rounded px-2 py-1.5 text-sm focus:border-blue-500 focus:outline-none",value:e.type,onChange:e=>{let l=[...N.questions];l[s].fields[t].type=e.target.value,w({...N,questions:l})},children:[(0,l.jsx)("option",{value:"radio",children:"Radio Buttons"}),(0,l.jsx)("option",{value:"select",children:"Dropdown"}),(0,l.jsx)("option",{value:"checkbox",children:"Checkbox"}),(0,l.jsx)("option",{value:"text",children:"Text Input"}),(0,l.jsx)("option",{value:"date",children:"Date Picker"})]})]}),(0,l.jsx)("div",{className:"flex items-center pt-5",children:(0,l.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,l.jsx)("input",{type:"checkbox",checked:!1!==e.required,onChange:e=>{let l=[...N.questions];l[s].fields[t].required=e.target.checked,w({...N,questions:l})},className:"rounded text-blue-500 focus:ring-blue-500"}),(0,l.jsx)("span",{className:"text-xs font-bold text-slate-600",children:"Required"})]})})]}),(0,l.jsx)("button",{onClick:()=>{let e=[...N.questions];e[s].fields.splice(t,1),w({...N,questions:e})},className:"text-slate-300 hover:text-red-500 transition-colors",children:(0,l.jsx)(i.A,{size:16})})]}),(0,l.jsxs)("div",{className:"mt-3 pt-3 border-t border-slate-100",children:[(0,l.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,l.jsx)("span",{className:"text-xs font-bold text-slate-500 uppercase",children:"Conditional Visibility (Optional)"})}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-1",children:"Show if field"}),(0,l.jsx)("input",{type:"text",placeholder:"field_name",className:"w-full bg-slate-50 border border-slate-100 rounded px-2 py-1.5 text-sm focus:border-blue-500 focus:outline-none font-mono",value:(null==(a=e.condition)?void 0:a.key)||"",onChange:e=>{let l=[...N.questions];l[s].fields[t].condition||(l[s].fields[t].condition={}),l[s].fields[t].condition.key=e.target.value,w({...N,questions:l})}})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-1",children:"Equals value"}),(0,l.jsx)("input",{type:"text",placeholder:"expected_value",className:"w-full bg-slate-50 border border-slate-100 rounded px-2 py-1.5 text-sm focus:border-blue-500 focus:outline-none font-mono",value:(null==(o=e.condition)?void 0:o.value)||"",onChange:e=>{let l=[...N.questions];l[s].fields[t].condition||(l[s].fields[t].condition={}),l[s].fields[t].condition.value=e.target.value,w({...N,questions:l})}})]})]}),(0,l.jsx)("p",{className:"text-[10px] text-slate-400 mt-1",children:"This field will only show if another field has the specified value"})]}),("radio"===e.type||"select"===e.type)&&(0,l.jsxs)("div",{className:"bg-slate-50 rounded-lg p-3 mt-3",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,l.jsx)("span",{className:"text-xs font-bold text-slate-500 uppercase",children:"Options"}),(0,l.jsxs)("button",{onClick:()=>{let e=[...N.questions];e[s].fields[t].options||(e[s].fields[t].options=[]),e[s].fields[t].options.push({label:"New Option",value:"new_val",priceChange:0}),w({...N,questions:e})},className:"text-[10px] font-bold text-blue-600 hover:underline flex items-center gap-1",children:[(0,l.jsx)(d.A,{size:12})," Add Option"]})]}),(0,l.jsx)("div",{className:"space-y-2",children:null==(r=e.options)?void 0:r.map((e,a)=>(0,l.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,l.jsx)("input",{type:"text",placeholder:"Label",className:"flex-1 bg-white border border-slate-200 rounded px-2 py-1 text-xs focus:border-blue-500 focus:outline-none",value:e.label,onChange:e=>{let l=[...N.questions];l[s].fields[t].options[a].label=e.target.value,w({...N,questions:l})}}),(0,l.jsx)("input",{type:"text",placeholder:"Value",className:"flex-1 bg-white border border-slate-200 rounded px-2 py-1 text-xs focus:border-blue-500 focus:outline-none font-mono",value:e.value,onChange:e=>{let l=[...N.questions];l[s].fields[t].options[a].value=e.target.value,w({...N,questions:l})}}),(0,l.jsxs)("div",{className:"relative w-24",children:[(0,l.jsx)("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-slate-400 text-xs",children:"₹"}),(0,l.jsx)("input",{type:"number",placeholder:"Price",className:"w-full bg-white border border-slate-200 rounded pl-5 pr-2 py-1 text-xs focus:border-blue-500 focus:outline-none",value:e.priceChange,onChange:e=>{let l=[...N.questions];l[s].fields[t].options[a].priceChange=parseFloat(e.target.value)||0,w({...N,questions:l})}})]}),(0,l.jsx)("button",{onClick:()=>{let e=[...N.questions];e[s].fields[t].options.splice(a,1),w({...N,questions:e})},className:"text-slate-300 hover:text-red-500",children:(0,l.jsx)(i.A,{size:14})})]},a))})]})]},t)}),(0,l.jsxs)("button",{onClick:()=>{let e=[...N.questions];e[s].fields.push({name:"new_field",label:"New Field",type:"radio",options:[],required:!0}),w({...N,questions:e})},className:"w-full py-2 border-2 border-dashed border-slate-200 rounded-xl text-slate-400 font-bold text-sm hover:border-blue-400 hover:text-blue-500 transition-all flex items-center justify-center gap-2",children:[(0,l.jsx)(d.A,{size:16})," Add Field"]})]})]},s)})]})]})]})}},37221:(e,s,t)=>{Promise.resolve().then(t.bind(t,23326))},65229:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});let l=(0,t(71847).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},71360:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});let l=(0,t(71847).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])}},e=>{e.O(0,[4230,4909,6184,8441,1255,7358],()=>e(e.s=37221)),_N_E=e.O()}]);