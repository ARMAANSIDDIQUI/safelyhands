(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2766],{16656:(e,s,t)=>{Promise.resolve().then(t.bind(t,51156))},51156:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>_});var l=t(95155),a=t(12115),r=t(66693),i=t(95527),n=t(10997),o=t(35626),d=t(5917),c=t(21873),x=t(24033),m=t(6191),u=t(65229),h=t(23327),b=t(16485),f=t(26983),p=t(35299),g=t(27937),v=t(15239),j=t(20063),y=t(13119),N=t(18720),w=t(64269);function k(e){var s;let{isOpen:t,onClose:r,subCategory:i,onConfirm:n,initialData:o={}}=e,[d,c]=(0,a.useState)(o),[x,m]=(0,a.useState)((null==i?void 0:i.price)||0);return((0,a.useEffect)(()=>{if(t&&(null==i?void 0:i.questions)){let e={...o},s=i.price||0;i.questions.forEach(s=>{s.fields.forEach(s=>{var t;void 0===e[s.name]&&(null==(t=s.options)?void 0:t[0])&&(e[s.name]=s.options[0].value)})}),c(e),m(s)}},[t,i]),(0,a.useEffect)(()=>{if(!(null==i?void 0:i.questions))return;let e=i.price||0;i.questions.forEach(s=>{s.fields.forEach(s=>{var t;let l=d[s.name],a=null==(t=s.options)?void 0:t.find(e=>e.value===l);(null==a?void 0:a.priceChange)&&(e+=a.priceChange)})}),m(e)},[d,i]),t&&i)?(0,l.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[(0,l.jsx)("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:r}),(0,l.jsxs)("div",{className:"relative bg-white rounded-[32px] shadow-2xl w-full max-w-3xl overflow-hidden animate-in fade-in zoom-in duration-300 flex flex-col max-h-[90vh]",children:[(0,l.jsx)("div",{className:"absolute top-6 right-6 z-10",children:(0,l.jsx)("button",{onClick:r,className:"w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center text-slate-500 hover:bg-slate-200 transition-colors",children:(0,l.jsx)(u.A,{size:24})})}),(0,l.jsxs)("div",{className:"p-10 overflow-y-auto custom-scrollbar flex-1",children:[(0,l.jsxs)("h2",{className:"text-2xl font-bold text-slate-900 mb-8 border-b pb-4",children:[i.name," Details"]}),(0,l.jsxs)("div",{className:"space-y-10",children:[null==(s=i.questions)?void 0:s.map((e,s)=>(0,l.jsx)("div",{className:"space-y-8",children:e.fields.map((e,s)=>(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-lg font-bold text-slate-800 mb-1",children:e.label}),(0,l.jsxs)("p",{className:"text-sm text-slate-400 mb-6 font-medium text-slate-500",children:["Select 1 out of ",e.options.length," options"]}),(0,l.jsx)("div",{className:"flex flex-wrap gap-3",children:e.options.map(s=>(0,l.jsxs)("button",{onClick:()=>c({...d,[e.name]:s.value}),className:(0,w.cn)("px-6 py-3 rounded-xl border-2 font-bold transition-all text-left",d[e.name]===s.value?"border-sky-500 bg-sky-50 text-sky-600 shadow-sm":"border-slate-100 text-slate-400"),children:[s.label,s.priceChange>0&&(0,l.jsxs)("span",{className:"text-xs ml-2 text-slate-500 opacity-70",children:["(+₹",s.priceChange,")"]})]},s.value))})]},s))},s)),i.inclusions&&(0,l.jsxs)("div",{className:"mt-10 bg-slate-50 p-6 rounded-2xl border border-slate-100",children:[(0,l.jsx)("h3",{className:"text-lg font-bold text-slate-800 mb-3",children:"Inclusions"}),(0,l.jsx)("p",{className:"text-sm text-slate-600 leading-relaxed",children:i.inclusions})]})]})]}),(0,l.jsxs)("div",{className:"p-8 border-t flex flex-col md:flex-row items-center justify-between gap-6 bg-white",children:[(0,l.jsx)("div",{className:"flex flex-col md:flex-row gap-8 lg:gap-16",children:(0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{className:"text-[13px] text-slate-500 font-medium mb-1",children:["Monthly Salary ",(0,l.jsxs)("span",{className:"text-sky-400 font-bold",children:["~₹",x,".00"]})," approx."]}),(0,l.jsx)("p",{className:"text-sm text-slate-400",children:"*estimate varies with workload"})]})}),(0,l.jsx)("button",{onClick:()=>{n(d,x),r()},className:"w-full md:w-auto px-12 py-4 bg-sky-500 text-white rounded-xl font-bold text-lg hover:bg-sky-600 transition-all shadow-lg shadow-sky-100",children:"Confirm & Done"})]})]})]}):null}var C=t(92216),S=t(83651);function A(){var e;let{user:s}=(0,y.A)(),t=(0,j.useRouter)(),r=(0,j.useSearchParams)(),[i,n]=(0,a.useState)(1),[A,z]=(0,a.useState)(!0),[_,D]=(0,a.useState)([]),[P,E]=(0,a.useState)([]),[q,F]=(0,a.useState)(""),[M,B]=(0,a.useState)(""),[T,O]=(0,a.useState)(null),[I,R]=(0,a.useState)([]),[G,L]=(0,a.useState)(!1),[U,W]=(0,a.useState)(null),[Q,Y]=(0,a.useState)({date:"",time:"",address:"",notes:"",genderPreference:"Female",babyDOB:"2025-12-01"}),[J,H]=(0,a.useState)(!1),K=(0,C.j)(),Z=(0,C.G)(S.AR),$=(0,C.G)(S.QS);(0,a.useEffect)(()=>{(async()=>{try{z(!0);let e=await fetch("".concat("http://localhost:5000/api","/cities"));e.ok&&D((await e.json()).filter(e=>e.isActive)),"idle"===$&&await K((0,S.jg)()).unwrap()}catch(e){console.error("Failed to fetch data",e),N.o.error("Failed to load data")}finally{z(!1)}})()},[K,$]),(0,a.useEffect)(()=>{let e=r.get("service"),s=r.get("step");if(e&&Z.length>0){let s=Z.find(s=>s.slug===e);s&&O(s)}if(s){let e=parseInt(s);e>=1&&e<=4&&(n(e),e>=2&&!q&&F("moradabad"),e>=3&&!T&&Z.length>0&&O(Z[0]))}},[r,Z]);let[V,X]=(0,a.useState)("2024-11-04"),[ee,es]=(0,a.useState)(!1);(0,a.useEffect)(()=>{T&&((async()=>{try{let e=await fetch("".concat("http://localhost:5000/api","/services/").concat(T._id,"/subcategories"));if(e.ok){let s=await e.json();E(s)}}catch(e){console.error("Failed to fetch subcategories",e)}})(),R([]),"babysitter"!==T.slug&&es(!1))},[T]),(0,a.useEffect)(()=>{if((null==T?void 0:T.slug)==="babysitter"&&V){let e=new Date(V);Math.abs(new Date-e)/2630016e3<2?es(!0):es(!1)}},[T,V]);let et=P.filter(e=>(null==T?void 0:T.slug)!=="babysitter"||(ee?e.name.toLowerCase().includes("japa"):!e.name.toLowerCase().includes("japa"))),el=I.reduce((e,s)=>e+Number(s.price)*(s.quantity||1),0),[ea,er]=(0,a.useState)(null),ei=async()=>{if(!s){N.o.error("Please login to complete your booking"),t.push("/login?redirect=/booking");return}if(!Q.date||!Q.address||!Q.time)return void N.o.error("Please fill all required details (Date, Time, Address)");H(!0);let e={serviceType:T.title,items:I.map(e=>({subCategory:e.subCategory._id,quantity:e.quantity,answers:e.answers,price:e.price})),genderPreference:Q.genderPreference,date:Q.date,time:Q.time,address:"".concat(Q.address).concat(M?", ".concat(M):""),city:q,notes:Q.notes,totalAmount:el,totalAmount:el,frequency:"Daily"};try{console.log("BookingWizard: Submitting booking. Token:",s.token);let t=await fetch("".concat("http://localhost:5000/api","/bookings"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s.token)},body:JSON.stringify(e)}),l=await t.json();if(!t.ok)throw Error(l.message||"Booking failed");er(l._id),window.scrollTo({top:0,behavior:"smooth"})}catch(e){N.o.error(e.message)}finally{H(!1)}};return(0,l.jsxs)("div",{className:"w-full max-w-5xl mx-auto md:py-8",children:[(0,l.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl md:rounded-[24px] shadow-2xl overflow-hidden min-h-[600px] flex flex-col border-y md:border border-white/20",children:[(0,l.jsxs)("div",{className:"p-4 md:p-6 border-b border-slate-100",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[i>1&&(0,l.jsx)("button",{onClick:()=>n(e=>Math.max(e-1,1)),className:"p-2 hover:bg-slate-50 rounded-full transition-colors",children:(0,l.jsx)(o.A,{size:24,className:"text-slate-800"})}),(0,l.jsx)("h1",{className:"text-2xl font-display font-bold text-slate-800",children:1===i?"Select City":2===i?"Select Service":3===i?"Customize Package":"Final Details"})]}),(0,l.jsx)("div",{className:"w-full h-1 bg-slate-100 rounded-full overflow-hidden",children:(0,l.jsx)("div",{className:"h-full bg-sky-500 transition-all duration-500",style:{width:"".concat(i/4*100,"%")}})})]}),(0,l.jsx)("div",{className:"flex-1 p-4 md:p-10 relative bg-white/50",children:ea?(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center text-center py-10 animate-in fade-in zoom-in duration-500",children:[(0,l.jsx)("div",{className:"w-24 h-24 bg-green-100 rounded-full flex items-center justify-center mb-6 text-green-600 shadow-sm",children:(0,l.jsx)(d.A,{size:48,strokeWidth:3})}),(0,l.jsx)("h2",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Booking Confirmed!"}),(0,l.jsx)("p",{className:"text-slate-500 max-w-md mb-8",children:"Your booking request has been received. Our team will review it and assign a professional shortly."}),(0,l.jsxs)("div",{className:"bg-slate-50 p-6 rounded-2xl border border-slate-100 mb-8 max-w-sm w-full",children:[(0,l.jsx)("p",{className:"text-sm text-slate-500 font-medium mb-1",children:"Booking Reference ID"}),(0,l.jsxs)("p",{className:"text-xl font-mono font-bold text-slate-800 tracking-wider",children:["#",ea.slice(-6).toUpperCase()]})]}),(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 w-full max-w-md",children:[(0,l.jsx)("button",{onClick:()=>t.push("/dashboard/bookings"),className:"flex-1 bg-sky-500 hover:bg-sky-600 text-white py-4 rounded-xl font-bold text-lg shadow-lg shadow-sky-100 transition-all",children:"Go to My Bookings"}),(0,l.jsx)("button",{onClick:()=>window.location.reload(),className:"flex-1 bg-white border-2 border-slate-100 hover:bg-slate-50 text-slate-600 py-4 rounded-xl font-bold text-lg transition-all",children:"Book Another"})]})]}):(0,l.jsxs)(l.Fragment,{children:[1===i&&(0,l.jsxs)("div",{className:"animate-in fade-in slide-in-from-right-8 duration-500 max-w-lg mx-auto",children:[(0,l.jsxs)("div",{className:"text-center mb-10",children:[(0,l.jsx)("h2",{className:"text-3xl font-bold text-slate-900 mb-3",children:"Where are you located?"}),(0,l.jsx)("p",{className:"text-slate-500",children:"Select your city to see available services"})]}),(0,l.jsxs)("div",{className:"space-y-4 relative",id:"booking-city-select",children:[(0,l.jsx)(c.A,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none",size:20}),(0,l.jsxs)("select",{value:q,onChange:e=>F(e.target.value),className:"w-full pl-12 pr-12 py-4 bg-slate-50 border border-slate-200 rounded-xl font-medium text-slate-700 focus:outline-none focus:ring-2 focus:ring-sky-500/20 focus:border-sky-500 transition-all appearance-none cursor-pointer hover:bg-slate-100/50",children:[(0,l.jsx)("option",{value:"",disabled:!0,children:"Choose a city..."}),_.map(e=>(0,l.jsx)("option",{value:e.slug,children:e.name},e._id))]}),(0,l.jsx)(x.A,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none",size:20})]}),(null==(e=_.find(e=>e.slug===q))?void 0:e.isOther)&&(0,l.jsx)("input",{type:"text",placeholder:"Enter your region...",value:M,onChange:e=>B(e.target.value),className:"w-full px-4 py-4 bg-slate-50 border border-slate-200 rounded-xl"})]}),2===i&&(0,l.jsxs)("div",{className:"animate-in fade-in slide-in-from-right-8 duration-500",children:[(0,l.jsx)("h2",{className:"text-xl font-bold text-slate-800 mb-6",id:"booking-service-heading",children:"Choose a Service"}),(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",id:"booking-service-type",children:Z.map(e=>(0,l.jsxs)("div",{onClick:()=>O(e),className:(0,w.cn)("group relative bg-white rounded-2xl p-4 shadow-sm border-2 transition-all cursor-pointer flex gap-4 hover:border-sky-200",(null==T?void 0:T._id)===e._id?"border-sky-500 bg-sky-50/10":"border-slate-100"),children:[(0,l.jsx)("div",{className:"w-20 h-20 relative rounded-xl overflow-hidden bg-slate-100 flex-shrink-0",children:(0,l.jsx)(v.default,{src:e.imageUrl||"/placeholder.jpg",alt:e.title,fill:!0,className:"object-cover"})}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("h3",{className:"font-bold text-slate-900",children:e.title}),(0,l.jsx)("p",{className:"text-xs text-slate-500 line-clamp-2 mt-1",children:e.description})]}),(0,l.jsx)("div",{className:(0,w.cn)("w-6 h-6 rounded-full border-2 flex items-center justify-center mt-1",(null==T?void 0:T._id)===e._id?"border-sky-500 bg-sky-500 text-white":"border-slate-300"),children:(null==T?void 0:T._id)===e._id&&(0,l.jsx)(d.A,{size:14})})]},e._id))})]}),3===i&&(0,l.jsxs)("div",{className:"animate-in fade-in slide-in-from-right-8 duration-500 flex flex-col md:flex-row gap-8 min-h-[500px]",children:[(0,l.jsxs)("div",{className:"flex-1 space-y-6",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("h2",{className:"text-xl font-bold text-slate-800",id:"booking-subcategory-heading",children:"Available Options"}),(0,l.jsx)("span",{className:"text-xs font-bold px-3 py-1 bg-sky-100 text-sky-600 rounded-full",children:(null==T?void 0:T.selectionMode)==="multiple"?"Multi-Select":"Single Select"})]}),(null==T?void 0:T.slug)==="babysitter"&&(0,l.jsxs)("div",{className:"bg-blue-50 border border-blue-100 p-4 rounded-xl mb-6",children:[(0,l.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Baby's Date of Birth"}),(0,l.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,l.jsx)("input",{type:"date",value:V,onChange:e=>X(e.target.value),className:"px-4 py-2 rounded-lg border border-slate-200 focus:outline-none focus:border-blue-400"}),ee&&(0,l.jsx)("div",{className:"text-sm text-blue-600 font-bold bg-blue-100 px-3 py-1 rounded-full animate-pulse",children:"Results updated for newborn care (Japa)"})]})]}),(0,l.jsx)("div",{className:"grid grid-cols-1 gap-4",id:"booking-subcategory-list",children:et.map(e=>{let s=I.some(s=>s.subCategory._id===e._id);return(0,l.jsxs)("div",{className:"bg-white border border-slate-200 rounded-2xl p-4 flex gap-4 transition-all hover:shadow-md",children:[(0,l.jsx)("div",{className:"w-24 h-24 relative rounded-xl overflow-hidden bg-slate-100 flex-shrink-0",children:(0,l.jsx)(v.default,{src:e.image||T.imageUrl,alt:e.name,fill:!0,className:"object-cover",sizes:"(max-width: 768px) 96px, 128px"})}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("h3",{className:"font-bold text-slate-900",children:e.name}),(0,l.jsxs)("p",{className:"text-sm text-sky-500 font-bold",children:["₹",e.price]}),(0,l.jsx)("p",{className:"text-xs text-slate-500 mt-1 line-clamp-2",children:e.description}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:e.features.slice(0,2).map((e,s)=>(0,l.jsx)("span",{className:"text-[10px] bg-slate-100 px-2 py-1 rounded text-slate-600",children:e},s))})]}),(0,l.jsx)("div",{className:"flex flex-col justify-center",children:(0,l.jsx)("button",{onClick:()=>{W(e),L(!0)},disabled:"single"===T.selectionMode&&s&&!1,className:"w-10 h-10 rounded-full bg-sky-50 text-sky-600 flex items-center justify-center hover:bg-sky-500 hover:text-white transition-all font-bold text-xl",children:(0,l.jsx)(m.A,{size:20})})})]},e._id)})})]}),(0,l.jsx)("div",{className:"w-full md:w-80 flex-shrink-0",id:"booking-cart-summary",children:(0,l.jsxs)("div",{className:"bg-slate-50 rounded-2xl p-6 border border-slate-200 sticky top-4",children:[(0,l.jsxs)("h3",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[(0,l.jsx)("div",{className:"w-2 h-2 rounded-full bg-sky-500"}),"Your Package"]}),0===I.length?(0,l.jsx)("div",{className:"text-center py-8 text-slate-400 text-sm",children:"No items selected"}):(0,l.jsxs)("div",{className:"space-y-4 mb-6",children:[I.map(e=>(0,l.jsxs)("div",{className:"bg-white p-3 rounded-xl border border-slate-100 shadow-sm relative group",children:[(0,l.jsxs)("div",{className:"flex justify-between items-start mb-1",children:[(0,l.jsx)("span",{className:"font-bold text-sm text-slate-800 leading-tight",children:e.subCategory.name}),(0,l.jsxs)("span",{className:"font-bold text-xs text-sky-500",children:["₹",e.price]})]}),(0,l.jsx)("div",{className:"text-[10px] text-slate-500 space-y-1",children:Object.entries(e.answers).map(e=>{let[s,t]=e;return(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsxs)("span",{className:"capitalize",children:[s,":"]}),(0,l.jsx)("span",{className:"font-medium",children:t})]},s)})}),(0,l.jsx)("button",{onClick:()=>{var s;return s=e._tempId,void R(e=>e.filter(e=>e._tempId!==s))},className:"absolute -top-2 -right-2 bg-red-100 text-red-500 p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity shadow-sm",children:(0,l.jsx)(u.A,{size:12})})]},e._tempId)),(0,l.jsxs)("div",{className:"border-t border-slate-200 pt-4",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,l.jsx)("span",{className:"text-sm font-medium text-slate-600",children:"Duration"}),(0,l.jsx)("span",{className:"text-sm font-bold text-slate-800",children:"1 Month (Daily Service)"})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"font-bold text-slate-700",children:"Total"}),(0,l.jsxs)("span",{className:"font-bold text-xl text-sky-600",children:["₹",el]})]})]})]})]})})]}),4===i&&(0,l.jsxs)("div",{className:"animate-in fade-in slide-in-from-right-8 duration-500 max-w-2xl mx-auto",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Final Details"}),(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"bg-blue-50 border border-blue-100 p-4 rounded-xl flex items-start gap-3",children:[(0,l.jsx)(h.A,{className:"text-blue-600 mt-0.5",size:20}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-bold text-blue-800 text-sm",children:"Monthly Service Plan"}),(0,l.jsx)("p",{className:"text-xs text-blue-600 mt-1",children:"This booking is for a duration of 30 days. The worker will visit daily at your preferred time."})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Start Date"}),(0,l.jsxs)("div",{className:"relative",id:"booking-date-time",children:[(0,l.jsx)(b.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),(0,l.jsx)("input",{type:"date",value:Q.date,onChange:e=>Y({...Q,date:e.target.value}),className:"w-full pl-10 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:border-sky-500"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Preferred Time"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(f.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),(0,l.jsx)("input",{type:"time",value:Q.time,onChange:e=>Y({...Q,time:e.target.value}),className:"w-full pl-10 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:border-sky-500"})]})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Complete Address"}),(0,l.jsx)("textarea",{id:"booking-address",value:Q.address,onChange:e=>Y({...Q,address:e.target.value}),placeholder:"House No, Street, Landmark...",className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:border-sky-500 h-24 resize-none"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Preferred Gender of Worker"}),(0,l.jsx)("div",{className:"flex gap-4",children:["Female","Male","Any"].map(e=>(0,l.jsx)("button",{onClick:()=>Y({...Q,genderPreference:e}),className:(0,w.cn)("flex-1 py-3 rounded-xl border font-bold transition-all",Q.genderPreference===e?"bg-slate-800 text-white border-slate-800":"bg-white border-slate-200 text-slate-500 hover:bg-slate-50"),children:e},e))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Additional Notes"}),(0,l.jsx)("textarea",{value:Q.notes,onChange:e=>Y({...Q,notes:e.target.value}),placeholder:"Any specific requirements...",className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:border-sky-500 h-24 resize-none"})]})]})]})]})}),!ea&&(0,l.jsxs)("div",{className:"p-6 bg-white/10 backdrop-blur-md border-t border-white/10 flex justify-between items-center",children:[(0,l.jsx)("div",{className:"hidden md:block",children:3===i&&(0,l.jsxs)("p",{className:"text-sm text-slate-500",children:["Total Estimate: ",(0,l.jsxs)("span",{className:"font-bold text-slate-900",children:["₹",el]})]})}),(0,l.jsx)("div",{className:"flex gap-4 w-full md:w-auto",children:(0,l.jsxs)("button",{id:"booking-submit-btn",onClick:4===i?ei:()=>{if(1===i){if(!q)return N.o.error("Please select your city");if("near-moradabad"===q&&!M)return N.o.error("Please specify your region");if(T)return void n(3)}return 2!==i||T?3===i&&0===I.length?N.o.error("Please select at least one option"):void n(e=>Math.min(e+1,4)):N.o.error("Please select a service")},disabled:J,className:"flex-1 md:w-48 h-12 bg-sky-500 text-white rounded-xl font-bold hover:bg-sky-600 transition-all shadow-lg flex items-center justify-center gap-2",children:[J?(0,l.jsx)(p.A,{className:"animate-spin"}):4===i?"Confirm Booking":"Next",!J&&i<4&&(0,l.jsx)(g.A,{size:18})]})})]})]}),(0,l.jsx)(k,{isOpen:G,onClose:()=>L(!1),subCategory:U,onConfirm:(e,s)=>{let t={subCategory:U,answers:e,price:s,quantity:1,_tempId:Date.now()};"single"===T.selectionMode?R([t]):R(e=>[...e,t])}})]})}function z(){return(0,l.jsx)("div",{className:"min-h-screen bg-transparent pt-[100px] pb-20",children:(0,l.jsx)("div",{className:"container mx-auto px-6 max-w-3xl",children:(0,l.jsx)("div",{className:"animate-pulse bg-white rounded-3xl h-[600px] shadow-sm border border-slate-100"})})})}function _(){return(0,l.jsxs)("main",{className:"min-h-screen bg-transparent",children:[(0,l.jsx)(r.default,{}),(0,l.jsx)("div",{className:"pt-32 pb-20 bg-transparent min-h-screen",children:(0,l.jsx)("div",{className:"container mx-auto px-6",children:(0,l.jsx)(a.Suspense,{fallback:(0,l.jsx)(z,{}),children:(0,l.jsx)(A,{})})})}),(0,l.jsx)(i.default,{}),(0,l.jsx)(n.default,{})]})}},64269:(e,s,t)=>{"use strict";t.d(s,{Y:()=>i,cn:()=>r});var l=t(2821),a=t(75889);function r(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,a.QP)((0,l.$)(s))}function i(e){return e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"}},83651:(e,s,t)=>{"use strict";t.d(s,{AR:()=>n,Ay:()=>c,Kx:()=>d,QS:()=>o,jg:()=>a});var l=t(26286);let a=(0,l.zD)("services/fetchServices",async(e,s)=>{let{getState:t,rejectWithValue:l}=s;try{let{services:e}=t().services,s=t().services.lastFetch,l=Date.now();if(e.length>0&&s&&l-s<3e5)return e;let a=await fetch("".concat("http://localhost:5000/api","/services"));if(!a.ok)throw Error("Failed to fetch services");return await a.json()}catch(e){return l(e.message)}}),r=(0,l.Z0)({name:"services",initialState:{services:[],status:"idle",error:null,lastFetch:null},reducers:{invalidateServices:e=>{e.status="idle",e.lastFetch=null}},extraReducers:e=>{e.addCase(a.pending,e=>{e.status="loading"}).addCase(a.fulfilled,(e,s)=>{e.status="succeeded",e.services=s.payload,e.lastFetch=Date.now()}).addCase(a.rejected,(e,s)=>{e.status="failed",e.error=s.payload})}}),{invalidateServices:i}=r.actions,n=e=>e.services.services,o=e=>e.services.status,d=e=>e.services.error,c=r.reducer},92216:(e,s,t)=>{"use strict";t.d(s,{G:()=>r,j:()=>a});var l=t(1213);let a=()=>(0,l.wA)(),r=l.d4}},e=>{e.O(0,[6711,4230,2619,4909,6566,3147,6206,5945,1395,6693,8441,1255,7358],()=>e(e.s=16656)),_N_E=e.O()}]);